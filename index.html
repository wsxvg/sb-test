<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="referrer" content="no-referrer">
    <title>世标五金</title>
    <style>
        :root {
            --primary: #3296F0;
            --bg: #F8F8F8;
            --text-black: #333;
            --text-gray: #888;
            --border: #eeeeee;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: -apple-system, system-ui, sans-serif; background: var(--bg); color: var(--text-black); font-size: 14px; }

        /* --- 通用：顶部导航栏 --- */
        .nav-header { 
            background: white; height: 44px; display: flex; align-items: center; justify-content: center;
            position: fixed; top: 0; width: 100%; z-index: 1000; font-weight: 500; font-size: 17px;
        }

        /* --- 页面容器 --- */
        .page { display: none; padding-bottom: 60px; min-height: 100vh; padding-top: 44px;}
        .page.active { display: block; }

        /* --- 1. 首页复刻 --- */
        .home-top { background: white; padding: 10px 15px; display: flex; align-items: center; justify-content: space-between; }
        .home-top .logo { height: 24px; }
        .home-top .icons { display: flex; gap: 15px; }
        .home-top .icons img { width: 22px; height: 22px; opacity: 0.6; }

        .banner-box { width: 100%; background: white; }
        .banner-box img { width: 100%; display: block; }

        .notice-bar { 
            background: white; padding: 10px 15px; display: flex; align-items: center; 
            margin: 5px 0; font-size: 13px; border-bottom: 1px solid #f9f9f9;
        }
        .notice-label { color: #E64340; font-weight: bold; margin-right: 10px; border-right: 1px solid #ddd; padding-right: 10px; }

        .brand-grid { 
            display: grid; grid-template-columns: repeat(5, 1fr); 
            background: white; padding: 15px 5px; gap: 10px 0;
        }
        .brand-item { text-align: center; }
        .brand-item .circle-img { 
            width: 55px; height: 55px; border-radius: 50%; border: 1px solid #eee; 
            margin: 0 auto 5px; overflow: hidden; display: flex; align-items: center; justify-content: center;
        }
        .brand-item img { width: 80%; object-fit: contain; }
        .brand-item p { font-size: 11px; color: #333; }

        /* --- 2. 分类页复刻 --- */
        .cat-container { display: flex; height: calc(100vh - 104px); background: white; }
        .nav-left { width: 90px; background: #F7F7F7; overflow-y: auto; }
        .nav-left-item { padding: 15px 5px; font-size: 13px; text-align: center; color: #666; border-left: 3px solid transparent; }
        .nav-left-item.active { background: white; color: var(--primary); border-left-color: var(--primary); font-weight: bold; }
        .content-right { flex: 1; overflow-y: auto; padding: 10px; }
        .sub-cat-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px 10px; }
        .sub-cat-item { text-align: center; }
        .sub-cat-item img { width: 100%; aspect-ratio: 1; border-radius: 4px; background: #f9f9f9; }
        .sub-cat-item p { font-size: 11px; color: #666; margin-top: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        /* --- 3. 购物车复刻 --- */
        .cart-empty { padding-top: 100px; text-align: center; color: #999; background: white; min-height: 100vh; }
        .cart-empty img { width: 200px; margin-bottom: 20px; }

        /* --- 4. 个人中心复刻 --- */
        .me-header { position: relative; height: 200px; overflow: hidden; }
        .me-bg { width: 100%; height: 100%; object-fit: cover; filter: brightness(0.8); }
        .user-info { 
            position: absolute; left: 20px; bottom: 60px; display: flex; align-items: center; color: white; 
        }
        .user-info .avatar { width: 65px; height: 65px; border-radius: 50%; border: 2px solid white; margin-right: 15px; }
        .user-info .nickname { font-size: 18px; font-weight: bold; }
        
        .stats-bar { 
            display: flex; background: rgba(255,255,255,0.9); width: 92%; margin: -40px auto 0; 
            border-radius: 8px; padding: 15px 0; position: relative; z-index: 10; text-align: center;
        }
        .stats-item { flex: 1; border-right: 1px solid #eee; }
        .stats-item:last-child { border-right: none; }
        .stats-item h4 { font-size: 16px; margin-bottom: 4px; }
        .stats-item p { font-size: 12px; color: #888; }

        .me-section { background: white; margin-top: 10px; padding: 10px 0; }
        .section-header { padding: 5px 15px 15px; font-weight: bold; font-size: 15px; border-bottom: 1px solid #f5f5f5; }
        .icon-menu { display: grid; grid-template-columns: repeat(4, 1fr); padding: 15px 0; gap: 20px 0; }
        .menu-item { text-align: center; }
        .menu-item img { width: 28px; height: 28px; margin-bottom: 8px; }
        .menu-item p { font-size: 12px; color: #444; }

        /* --- 底部 TabBar --- */
        .tabbar { 
            position: fixed; bottom: 0; width: 100%; height: 55px; background: white; 
            border-top: 1px solid #ddd; display: flex; z-index: 2000;
        }
        .tab-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 10px; color: #777; }
        .tab-item img { width: 24px; height: 24px; margin-bottom: 3px; }
        .tab-item.active { color: var(--primary); }

    </style>
</head>
<body>

    <div class="nav-header" id="pageTitle">首页</div>

    <!-- 1. 首页 -->
    <div id="homePage" class="page active" style="padding-top: 0;">
        <div class="home-top">
            <div style="font-weight: bold; font-size: 20px;">SHIBIAO 世标</div>
            <div class="icons">
                <img src="https://kaifa.sintoyu.cn/xcximages/user-account-1.png" style="filter: grayscale(1);">
                <img src="https://kaifa.sintoyu.cn/xcximages/user-account-2.png" style="filter: grayscale(1);">
                <img src="https://kaifa.sintoyu.cn/xcximages/user-account-4.png" style="filter: grayscale(1);">
            </div>
        </div>
        <div class="banner-box">
            <img src="https://kaifa.sintoyu.cn/xcximages/user-bg.png">
        </div>
        <div class="notice-bar">
            <span class="notice-label">店铺公告</span>
            <marquee>欢迎来到世标工品汇</marquee>
        </div>
        <div class="banner-box">
            <img src="https://kaifa.sintoyu.cn/xcximages/user-bg.png" style="height: 180px; object-fit: cover;">
        </div>
        <!-- 品牌圆形图标区 -->
        <div id="homeBrandGrid" class="brand-grid"></div>
    </div>

    <!-- 2. 分类页 -->
    <div id="categoryPage" class="page">
        <div class="cat-container">
            <div id="catLeft" class="nav-left"></div>
            <div id="catRight" class="content-right">
                <div id="subGrid" class="sub-cat-grid"></div>
            </div>
        </div>
    </div>

    <!-- 3. 购物车 -->
    <div id="cartPage" class="page">
        <div class="cart-empty">
            <img src="https://kaifa.sintoyu.cn/xcximages/cart-empty2.png">
            <p>购物车空空如也~~</p>
        </div>
    </div>

    <!-- 4. 我的 -->
    <div id="mePage" class="page" style="padding-top: 0;">
        <div class="me-header">
            <img class="me-bg" src="https://kaifa.sintoyu.cn/xcximages/user-bg.png">
            <div class="user-info">
                <div class="avatar" style="background: white;"></div>
                <div class="nickname">17826038535</div>
            </div>
        </div>
        <div class="stats-bar">
            <div class="stats-item"><h4>¥0</h4><p>应付</p></div>
            <div class="stats-item"><h4>¥0</h4><p>优惠券</p></div>
            <div class="stats-item"><h4>0</h4><p>积分</p></div>
            <div class="stats-item"><h4>0</h4><p>金豆</p></div>
        </div>

        <div class="me-section">
            <div class="section-header">我的订单</div>
            <div class="icon-menu">
                <div class="menu-item"><img src="https://kaifa.sintoyu.cn/xcximages/user-account-1.png"><p>待支付</p></div>
                <div class="menu-item"><img src="https://kaifa.sintoyu.cn/xcximages/user-account-2.png"><p>待收货</p></div>
                <div class="menu-item"><img src="https://kaifa.sintoyu.cn/xcximages/user-account-4.png"><p>已完成</p></div>
                <div class="menu-item"><img src="https://kaifa.sintoyu.cn/xcximages/user-account-1.png"><p>待评价</p></div>
            </div>
        </div>
    </div>

    <!-- 底部导航 -->
    <div class="tabbar">
        <div class="tab-item active" onclick="switchTab('home', this)">
            <img src="images/home.png"><span>首页</span>
        </div>
        <div class="tab-item" onclick="switchTab('category', this)">
            <img src="images/category_un.png"><span>分类</span>
        </div>
        <div class="tab-item" onclick="switchTab('cart', this)">
            <img src="images/cart_un.png"><span>购物车</span>
        </div>
        <div class="tab-item" onclick="switchTab('me', this)">
            <img src="images/user_un.png"><span>我</span>
        </div>
    </div>

    <script>
        let db = null;
        const IMG_HOST = "https://kaifa.sintoyu.cn";

        async function init() {
            const res = await fetch('products_db.json');
            db = await res.json();
            renderHomeBrands();
            renderCategory();
        }

        function switchTab(type, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
            
            document.getElementById(type + 'Page').classList.add('active');
            el.classList.add('active');
            
            const titles = {home: '首页', category: '商品分类', cart: '购物车', me: '个人中心'};
            document.getElementById('pageTitle').textContent = titles[type];
            document.getElementById('pageTitle').style.display = (type === 'home' || type === 'me') ? 'none' : 'flex';
        }

        // 渲染首页的品牌圆形图标 (取分类树的前10个)
        function renderHomeBrands() {
            const grid = document.getElementById('homeBrandGrid');
            const items = db.category_tree.slice(0, 10);
            grid.innerHTML = items.map(cat => `
                <div class="brand-item">
                    <div class="circle-img"><img src="${cat.img ? IMG_HOST + cat.img : 'placeholder.svg'}"></div>
                    <p>${cat.name}</p>
                </div>
            `).join('');
        }

        function renderCategory() {
            const left = document.getElementById('catLeft');
            left.innerHTML = db.category_tree.map((cat, idx) => `
                <div class="nav-left-item ${idx===0?'active':''}" onclick="showSub(${idx})">${cat.name}</div>
            `).join('');
            showSub(0);
        }

        function showSub(idx) {
            const items = document.querySelectorAll('.nav-left-item');
            items.forEach(it => it.classList.remove('active'));
            items[idx].classList.add('active');

            const cat = db.category_tree[idx];
            const grid = document.getElementById('subGrid');
            
            // 渲染该大类下的所有二级分类图标
            grid.innerHTML = cat.subs.map(sub => `
                <div class="sub-cat-item">
                    <img src="${sub.img ? (sub.img.startsWith('http')?sub.img : IMG_HOST+sub.img) : 'placeholder.svg'}">
                    <p>${sub.name}</p>
                </div>
            `).join('');
        }

        init();
    </script>
</body>
</html>