# GitHub Actions 自动更新说明

## 功能说明

这个 GitHub Actions 工作流会自动执行以下任务：

1. **定时运行**：每天北京时间凌晨 5:00 自动运行
2. **抓取数据**：运行 `demo.py` 脚本抓取最新商品数据
3. **数据验证**：检查生成的数据是否有效
4. **智能提交**：只有数据发生变化时才提交
5. **自动推送**：将更新推送到 GitHub 仓库

## 手动触发

如果需要立即更新数据，可以手动触发：

1. 进入 GitHub 仓库页面
2. 点击 `Actions` 标签
3. 选择 `自动更新商品数据` 工作流
4. 点击 `Run workflow` 按钮
5. 点击绿色的 `Run workflow` 确认

## 查看运行日志

1. 进入 `Actions` 标签
2. 点击最近的工作流运行记录
3. 查看每个步骤的详细日志

## 注意事项

### 1. 登录凭证
`demo.py` 中的登录凭证（`_ydhid`、`_machineid` 等）可能会过期。如果发现 Actions 运行失败，需要：
- 更新 `demo.py` 中的凭证
- 重新提交到仓库

### 2. 运行时间
- 完整抓取约需 10-15 分钟
- GitHub Actions 免费额度：公开仓库无限制，私有仓库每月 2000 分钟

### 3. 失败处理
如果工作流失败：
- 查看 Actions 日志找出原因
- 常见问题：网络超时、登录失败、数据格式错误
- 修复后可以手动重新运行

## 时间设置

当前设置为每天 UTC 21:00（北京时间 05:00）运行。

如需修改时间，编辑 `update-products.yml` 中的 cron 表达式：
```yaml
schedule:
  - cron: '0 21 * * *'  # 分 时 日 月 周
```

常用时间对照：
- 北京时间 03:00 = UTC 19:00 → `'0 19 * * *'`
- 北京时间 05:00 = UTC 21:00 → `'0 21 * * *'`
- 北京时间 12:00 = UTC 04:00 → `'0 4 * * *'`

## 禁用自动更新

如果需要临时禁用自动更新：
1. 编辑 `update-products.yml`
2. 注释掉 `schedule` 部分
3. 提交更改

## 监控建议

建议定期检查：
- Actions 运行是否成功
- 商品数量是否正常（应该在 10000+ 左右）
- 数据更新时间是否符合预期
